<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link rel="icon" href="https://www.ilo.org/wcmsp5/groups/public/---ed_emp/documents/image/wcms_625841.png"
        type="image/x-icon">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;900&display=swap" rel="stylesheet">


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>


    <style>
        body {
            font-family: 'Roboto', sans-serif;
            text-align: center;
            /* Reemplazo para <center> */
        }

        .btn-custom {
            font-size: 12px;
            border: 1px solid #656565;
            background-color: #EFEFEF;
            border-radius: 2.5px;
        }

        .btn-seleccion {
            font-size: 12px;
        }

        .btn-custom:hover,
        .btn-custom:focus {
            background-color: #e6e6e6;
        }

        .btn-custom:focus {
            outline: none;
            background-color: #EFEFEF;
        }

        .header-image {
            float: left;
            margin-right: 200px;
            height: auto;
            width: 600px;
            margin-top: 15px;
        }

        .clear {
            clear: left;
        }

        .blue-line {
            width: 100%;
            height: 5px;
            background-color: #009DDA;
            position: absolute;
            top: 0;
            left: 0;
        }

        .btn-sm {
            padding: 0.25rem 0.5rem;
            font-size: 12px;
        }

        .custom-file-input {
            display: none;
        }

        .custom-file-label::after {
            content: "Choose File";
        }
    </style>
</head>

<body>
    <div class="blue-line"></div>
    <img src="https://raw.githubusercontent.com/Lina-go/PROYECTO_ECG/main/Imagenes/S_SDG_logo_without_UN_emblem_horizontal_Transparent_WEB.png"
        alt="Image Description" class="header-image">
    <div class="clear"></div>


    <h1>API de Objetivos de Desarrollo Sostenible</h1>

    <h2>Objetivos de Desarrollo Sostenible</h2>
      
    <p>En esta API puedes ingresar un texto y te dir√° a que objetivo de desarrollo sostenible pertenece.</p>
    <h3>Cargar Archivo de ODS</h3>
    <div class="d-flex justify-content-center">
        <form method="post" action="/predict-file" enctype="multipart/form-data" class="d-flex align-items-center">

            <input type="file" name="file" id="file-input" class="custom-file-input" style="display: none;"
                onchange="updateLabel()">
            <label for="file-input" class="btn btn-outline-primary btn-sm m-0">Seleccionar archivo</label>
            <div id="file-status" class="btn-sm m-0 ml-2">No file selected</div>

            <button type="submit" class="btn btn-outline-primary btn-sm"
                style="position: relative; top: -0px;">Clasificar</button>
        </form>
    </div>


    <div id="plot"></div>
    <script>
        var data = % s;
        Plotly.newPlot('plot', data);
    </script>



    <h3>Escribir texto</h3>
    <div>
        <form method="get" action="/predict-text" id="textarea">
            <textarea name="input" id="input" rows="4" cols="50" required></textarea>
            <br><br>
            {% for value in prediction %}
            <p>Texto de ODS: {{ value }}</p>
            {% endfor %}
            <button type="submit" id="submit" class="btn btn-outline-primary btn-sm">Clasificar</button>
        </form>
        <script>
            var value = localStorage.getItem('submit');

            if (value) {
                document.getElementById('input').value = value;
            }
        </script>
        <script>
            function updateLabel() {
                const fileInput = document.getElementById("file-input");
                const label = document.querySelector("label[for='file-input']");
                const fileStatus = document.getElementById("file-status");

                if (fileInput.files.length > 0) {
                    const fileName = fileInput.files[0].name;
                    fileStatus.innerText = fileName;
                } else {
                    label.innerText = "Choose File";
                    fileStatus.innerText = "No file selected";
                }
            }

        </script>
    </div>
</body>

</html>